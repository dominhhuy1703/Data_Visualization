<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <link rel="icon" href="data:,">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script type="module" src="components/my-component/my-component.js"></script>
    <script src = "components/my-component/window-chart.js"></script>
    <script src = "components/my-component/pie-chart.js"></script>
    <script src = "components/my-component/bar-chart.js"></script>
    <script src = "components/my-component/nodelink-chart.js"></script>
    <script src = "components/my-component/map-chart.js"></script>
    <link rel="stylesheet" href="index.css">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>MDN Example</title>
  </head>
  <body>
    <div class="container">
        <div class="chart-selector">
            <h4>Select Chart</h4>
            <label><input type="radio" name="chartType" value="pie-chart" checked> Pie Chart</label><br>
            <label><input type="radio" name="chartType" value="bar-chart"> Bar Chart</label><br>
            <label><input type="radio" name="chartType" value="nodelink-chart"> Node Link</label><br>
            <label><input type="radio" name="chartType" value="map-chart"> Map Chart</label><br>
            <button id="run">Run</button>
        </div>
    </div>
    <script>
        const runButton = document.querySelector('#run');
        runButton.addEventListener('click', () => updateChart());

        function updateChart(){
            const data=`[
                {"value": 22.4, "tag": "Youtube", "icon": "icons/youtube.png"},
                {"value": 21.9, "tag": "Zalo", "icon": "icons/zalo.png"},
                {"value": 26.2, "tag": "Facebook", "icon": "icons/facebook.png"},
                {"value": 12, "tag": "Instagram", "icon": "icons/instagram.png"},
                {"value": 9, "tag": "Tiktok", "icon": "icons/tiktok.png"},
                {"value": 8.5, "tag": "Twitter", "icon": "icons/twitter.png"}
            ]`;
            const nodelinkData=`{
                "nodes": [
                    {"id": 1, "name": "A"},
                    {"id": 2, "name": "B"},
                    {"id": 3, "name": "C"},
                    {"id": 4, "name": "D"},
                    {"id": 5, "name": "E"}
                ],
                "links": [
                    {"source": 1, "target": 2},
                    {"source": 1, "target": 5}
                ]
            }`;
            const selectedChart = document.querySelector('input[name="chartType"]:checked').value;
            let windowChart = document.createElement('window-chart')
            if (selectedChart === 'nodelink-chart'){
            windowChart.setAttribute('data', nodelinkData);
            }
            else {
            windowChart.setAttribute('data', data);
            }
            windowChart.setAttribute('chart-type', selectedChart);
            document.querySelector(".container").append(windowChart);
        };
        
    </script>
  </body>
</html>